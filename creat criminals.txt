-- Creates the "criminals" table to store information about criminals.
-- This table includes a foreign key link to the "officers" table.

CREATE TABLE public.criminals (
  -- 'id' is the primary key, auto-incrementing.
  id bigint generated by default as identity primary key,

  -- 'nid' stores the National ID of the criminal. Making it unique prevents duplicate entries.
  nid text unique,

  -- 'name' stores the criminal's full name. It cannot be empty.
  name text not null,

  -- 'dob' stores the date of birth.
  dob date,

  -- 'status' can be used to track the criminal's current situation (e.g., 'At Large', 'Incarcerated').
  status text,

  -- This is the foreign key that links to the 'officers' table.
  -- It connects a criminal to their arresting or supervising officer.
  officer_id bigint references public.officers(id) on delete set null,

  -- 'created_at' automatically records when the criminal's record was added.
  created_at timestamptz default now()
);

-- Optional: Add a comment to the table for better documentation.
COMMENT ON TABLE public.criminals IS 'Stores records of criminals, linking each to a primary officer.';

-- Optional: Create an index on the foreign key for faster lookups.
CREATE INDEX idx_criminals_officer_id ON public.criminals(officer_id);
